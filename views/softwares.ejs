<%- include('partials/_header') %>
<style>
    .no-hay {
        margin: 25px 25%;
    }
    .no-hay h4 {
        color: darkgrey;
    }
    .menu-lateral {
        background-color: #2c3034;
    }
    .modal-content {
        color: white;
        background-color: #2c3034;
        border: none;
    }
    .modal-header, .modal-footer {
        border: none;
    }
    .form-control {
        background-color: #2c3034;
        color: white;
        border: 1px solid #555;
    }
    .form-control::placeholder {
        color: darkgrey;
    }
    .form-control:focus {
        background-color: #1f2225;
        color: white;
        border-color: #007bff;
        box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }
</style>

<div class="container-fluid min-vh-100 d-flex" style="background-color: #2c3034">
    <!-- Barra lateral izquierda -->
    <aside class="col-md-3 col-lg-2 p-3 d-flex flex-column justify-content-center menu-lateral">
        <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#ModalAdd">Añadir Software</button>
    </aside>

    <div class="modal fade" id="ModalAdd" tabindex="-1" aria-labelledby="ModalAddLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="ModalAddLabel">Añadir Software</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cancelar"></button>
                </div>
                <div class="modal-body">
                    <form action="/asignaturas/softwares/<%= asignatura.id%>/add/" method="POST">
                        <div class="mb-3">
                            <label for="descripcion" class="form-label">Descripción:</label>
                            <input type="text" id="descripcion" name="descripcion" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label for="direccion" class="form-label">Dirección:</label>
                            <input type="text" id="direccion" name="direccion" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Guardar Cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenido principal -->
    <main class="col-md-9 col-lg-10">
        <div class="header-footer text-center">
            <h1><%= asignatura.nombre %></h1>
        </div>
        <% if (softwares.length > 0) { %>
            <div class="container mt-4">
                <div class="row row-cols-1 row-cols-md-3 g-4">
                    <!-- Tarjetas de software -->
                    <% softwares.forEach(function(software) { %>
                        <div class="col">
                            <div class="card h-100">
                                <div class="card-body">
                                    <p class="card-text"><strong>Url:</strong> <%= software.direccion %></p>
                                    <p class="card-text"><strong>Descripción:</strong> <%= software.descripcion %></p>
                                </div>
                                <%if (user.role >= 1){%>
                                <div class="card-footer">
                                    <a href="#" class="btn btn-dark">Eliminar</a>
                                </div>
                                <%}%>
                            </div>
                        </div>
                    <% }) %>
                </div>
            </div>
        <% } else { %>
            <div class="header-footer text-center no-hay">
                <h4>No hay softwares disponibles</h4>
            </div>
        <% } %>
    </main>
</div>

<%- include('partials/_footer') %>
